<!DOCTYPE html>
<html xml:lang="en" lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="~/style/css/style-main-home-03.css" />
    <link rel="stylesheet" type="text/css" href="~/style/css/image.css">
    <link rel="stylesheet" type="text/css" href="~/style/css/checkout.css">
    <link rel="stylesheet" type="text/css" href="~/style/css/jquery.exzoom.css" />
    <link rel="stylesheet" type="text/css" href="~/admin/bootstrap-select/css/bootstrap-select.min.css">
    <link rel="stylesheet" type="text/css" href="~/style/css/loading/modal-loading.css" />
    <link rel="stylesheet" type="text/css" href="~/style/css/loading/modal-loading-animate.css" />
    <link rel="stylesheet" type="text/css" href="~/style/sweetalert2/dist/sweetalert2.min.css" />
    <link rel="stylesheet" type="text/css" href="~/style/css/snackbar/notiny.css" />
    <link rel="stylesheet" type="text/css" href="~/style/css/paypal/paypal.css" />
    <title>@ViewData["Title"]</title>
    <style>
        ::-webkit-scrollbar {
            width: 6px;
            height: 6px;
            background-color: #F5F5F5;
        }

        ::-webkit-scrollbar-track {
            -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.3);
            background-color: #F5F5F5;
        }

        ::-webkit-scrollbar-thumb {
            background-color: #0ae;
            background-image: -webkit-gradient(linear, 0 0, 0 100%, color-stop(.5, rgba(255, 255, 255, .2)), color-stop(.5, transparent), to(transparent));
        }
    </style>
    @RenderSection("Styles", false)
</head>

<body class="home home-03">
    <div id="header">
        @await Html.PartialAsync("~/Views/Shared/_Header.cshtml")
    </div>
    <div id="box-content">
        <div class="container">
            <div class="row">
                <div class="row">
                    <div id="left-nav">
                        @await Html.PartialAsync("~/Views/Shared/_LeftNavigation.cshtml")
                    </div>

                    <div id="banner">
                        @await Html.PartialAsync("~/Views/Shared/_Banner.cshtml")
                    </div>
                </div>
            </div>
        </div>
        @RenderBody()
    </div>

    @await Html.PartialAsync("~/Views/Shared/_Footer.cshtml")

    <script type="text/javascript" src="~/js/jquery-1.11.1.min.js"></script>
    <script type="text/javascript" src="~/style/bootstrap/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="~/js/galary-image/js/jquery.blueimp-gallery.min.js"></script>
    <script type="text/javascript" src="~/js/galary-image/js/bootstrap-image-gallery.js"></script>
    <script type="text/javascript" src="~/js/owl-carousel/owl.carousel.js"></script>
    <script type="text/javascript" src="~/js/slideshow/jquery.themepunch.revolution.js"></script>
    <script type="text/javascript" src="~/js/slideshow/jquery.themepunch.plugins.min.js"></script>
    <script type="text/javascript" src="~/js/theme-home-03.js"></script>
    <script type="text/javascript" src="~/js/images-show/images-loader.js"></script>
    <script type="text/javascript" src="~/js/images-show/jquery.exzoom.js"></script>
    <script type="text/javascript" src="~/js/ProductDetailHelper.js"></script>
    <script type="text/javascript" src="~/js/loading/modal-loading.js"></script>
    <script type="text/javascript" src="~/style/sweetalert2/dist/sweetalert2.min.js"></script>
    <script type="text/javascript" src="~/js/snackbar/notiny.js"></script>
    <script type="text/javascript" src="~/js/cart/cart.js"></script>
    <script type="text/javascript" src="~/js/QuantityHelper.js"></script>
    <script type="text/javascript" src="~/lib/signalr/dist/browser/signalr.js"></script>
    @if (User.Identity.IsAuthenticated && User.IsInRole("Customer"))
    {
        <script>
            var idleTime = 0;
            $(document).ready(function () {
                //Increment the idle time counter every minute.
                //var idleInterval =
                setInterval(timerIncrement, 60000); // 1 minute

                //Zero the idle timer on mouse movement.
                $(this).mousemove(function (e) {
                    idleTime = 0;
                });
                $(this).keypress(function (e) {
                    idleTime = 0;
                });
            });

            function timerIncrement() {
                idleTime = idleTime + 1;
                if (idleTime > 29) { // 29 minutes
                    window.location.href = "/Account/Logout"
                }
            }
        </script>

        <script>
            "use strict";

            let connection = new signalR.HubConnectionBuilder()
                .withUrl("/signalServer")
                .withAutomaticReconnect()
                .build();

            connection.on("rejectNotificationCustomer", function () {
                loadNewNotify('Thông báo đơn hàng đã được hủy');
            })

            connection.on("newSaleNotificationCustomer", function () {
                loadNewNotify('Thông báo có khuyến mại mới');
            });

            connection.start().then(function () {
                connection.invoke("CustomerJoinGroup", "Customer");
            }).catch(function (err) {
                return console.error(err);
            })

            function loadNewNotify(content) {
                var number = parseInt($('#count-notification').text());
                number++;
                if (number > 99) {
                    $('#count-notification').text('+99')
                }
                else {
                    $('#count-notification').text(number.toString())
                }

                $.notiny({
                    position: 'right-top',
                    theme: 'success',
                    template: '<div class="notiny-base"><div class="MuiPaper-root MuiAlert-root MuiAlert-filledSuccess MuiPaper-elevation6"><div class="MuiAlert-icon"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeInherit" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path d="M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"></path></svg></div><div class="notiny-text MuiAlert-message"></div></div></div>',
                    text: content,
                });
            }

        </script>
    }
    @await RenderSectionAsync("Scripts", required: false)
</body>

</html>